<?xml version="1.0"?>
<mavlink>
    <!-- MAVLink standard messages -->
    <include>common_minimal.xml</include>
    <dialect>9</dialect>
    <enums>
        <enum name="SYSTEM_STATE">
            <description>State of the water tracking device</description>
            <entry value="1" name="SYSTEM_STATE_INITALIZING"></entry>
            <entry value="2" name="SYSTEM_STATE_READY"></entry>
            <entry value="3" name="SYSTEM_STATE_FILLING_IDENTIFIED"></entry>
            <entry value="4" name="SYSTEM_STATE_FILLING_UNIDENTIFIED"></entry>
            <entry value="5" name="SYSTEM_STATE_PAUSE"></entry>
            <entry value="6" name="SYSTEM_STATE_UPLOADING"></entry>
            <entry value="7" name="SYSTEM_STATE_OVERRIDE_ON"></entry>
            <entry value="8" name="SYSTEM_STATE_ERROR"></entry>
        </enum>
        <enum name="STATE_INPUT">
            <description> State inputs to water tracking device </description>
            <entry value="1" name="STATE_INPUT_BADGE_PRESENT"></entry>
            <entry value="2" name="STATE_INPUT_BADGE_LEAVE"></entry>
            <entry value="3" name="STATE_INPUT_PULSER_PULSE"></entry>
            <entry value="4" name="STATE_INPUT_OVERRIDE_ON"></entry>
            <entry value="5" name="STATE_INPUT_OVERRIDE_OFF"></entry>
            <entry value="6" name="STATE_INPUT_ADMIN_START"></entry>
            <entry value="7" name="STATE_INPUT_ADMIN_STOP"></entry>
            <entry value="8" name="STATE_INPUT_UPLOAD_REQUEST"></entry>
            <entry value="9" name="STATE_INPUT_UPLOAD_COMPLETE"></entry>
            <entry value="10" name="STATE_INPUT_UPLOAD_RETRY"></entry>
            <entry value="11" name="STATE_INPUT_UPLOAD_ABORT"></entry>
            <entry value="12" name="STATE_INPUT_FILL_LIMIT"></entry>
        </enum>
    </enums>
    <messages>
        <message name="STATE_INPUT_EVENT" id="1">
            <description>State input event</description>
            <field name="event" type="uint8_t" enum="STATE_INPUT">the state input event</field>
        </message>
        <message name="IDENTIFIER" id="2">
            <description> Indentifiying information about the EOS device </description>
            <field name="particle_id" type="char[24]"> Particle ID of device. Unique and unchangable </field>
            <field name="local_ip" type="uint8_t[4]"> local IPV4 Address of the device</field>
            <field name="mac" type="uint8_t[6]"> MAC address of the device</field>
            <field name="name" type="char[20]">Friendly name of device i.e. P2-123456</field>
            <field name="site_friendly_name" type="char[30]"> Friendly name for the site it's at, i.e. "57 Rock West"</field>
            <field name="site_name" type="char[30]"> Name of the site where the scanner is located,
                i.e. "Gainesville Plant"</field>
        </message>
        <message name="WATER_TRANSACTION" id="3">
            <description>Water transaction information</description>
            <field name="badge_id_int" type="uint64_t"> badge ID as int</field>
            <field name="truck_name" type="char[20]"> Truck name associated with badge ID</field>
            <field name="pulses" type="uint16_t"> Number of pulses in current transaction</field>
            <field name="dispensed_ml" type="uint32_t" units="mL"> Number of ML dispensed in currenttransaction</field>
            <field name="limit_ml" type="uint32_t" units="mL"> Limit for this transaction </field>
            <field name="start_reason" type="uint8_t" enum="STATE_INPUT"> Reason the transaction began </field>
            <field name="stop_reason" type="uint8_t" enum="STATE_INPUT"> Reason the transaction stopped </field>
            <field name="start_time_utc" type="uint64_t" units="s"> unix start time of the transaction in seconds</field>
            <field name="stop_time_utc" type="uint64_t" units="s"> unix stop time of the transaction in seconds</field>
        </message>
    </messages>
</mavlink>